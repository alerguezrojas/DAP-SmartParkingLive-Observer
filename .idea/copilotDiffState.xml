<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/smartparking/SmartParkingApplication.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/smartparking/SmartParkingApplication.java" />
              <option name="updatedContent" value="package smartparking;&#10;&#10;import org.springframework.boot.SpringApplication;&#10;import org.springframework.boot.autoconfigure.SpringBootApplication;&#10;import org.springframework.context.ConfigurableApplicationContext;&#10;import org.springframework.messaging.simp.SimpMessagingTemplate;&#10;import smartparking.model.ParkingLot;&#10;import smartparking.model.SpotStatus;&#10;import smartparking.observers.*;&#10;import smartparking.service.ParkingService;&#10;&#10;@SpringBootApplication&#10;public class SmartParkingApplication {&#10;&#10;    public static void main(String[] args) throws InterruptedException {&#10;        ConfigurableApplicationContext context = SpringApplication.run(SmartParkingApplication.class, args);&#10;&#10;        // Obtenemos el servicio de parking&#10;        ParkingService parkingService = context.getBean(ParkingService.class);&#10;        ParkingLot parkingLot = parkingService.getParkingLot();&#10;&#10;        // Obtenemos el template de mensajería&#10;        SimpMessagingTemplate messagingTemplate = context.getBean(SimpMessagingTemplate.class);&#10;&#10;        // Creamos los observadores&#10;        WebDashboardObserver webDashboard = new WebDashboardObserver(parkingLot);&#10;        SecurityModuleObserver securityModule = new SecurityModuleObserver();&#10;        StatisticsModuleObserver statisticsModule = new StatisticsModuleObserver(parkingLot);&#10;        MobileNotifierObserver mobileNotifier = new MobileNotifierObserver(3);&#10;        WebSocketObserver webSocketObserver = new WebSocketObserver(messagingTemplate);&#10;&#10;        // Registramos los observadores en todas las plazas&#10;        parkingLot.attachObserverToAllSpots(webDashboard);&#10;        parkingLot.attachObserverToAllSpots(securityModule);&#10;        parkingLot.attachObserverToAllSpots(statisticsModule);&#10;        parkingLot.attachObserverToAllSpots(mobileNotifier);&#10;        parkingLot.attachObserverToAllSpots(webSocketObserver);&#10;&#10;        System.out.println(&quot;\n========================================&quot;);&#10;        System.out.println(&quot; SmartParking Live - Servidor iniciado&quot;);&#10;        System.out.println(&quot;========================================&quot;);&#10;        System.out.println(&quot; Interfaz Web: http://localhost:8080&quot;);&#10;        System.out.println(&quot; WebSocket: ws://localhost:8080/ws-parking&quot;);&#10;        System.out.println(&quot; API REST: http://localhost:8080/api/parking&quot;);&#10;        System.out.println(&quot;========================================\n&quot;);&#10;&#10;        // Simulación opcional en un hilo separado&#10;        Thread simulationThread = new Thread(() -&gt; {&#10;            try {&#10;                Thread.sleep(5000); // Esperar 5 segundos antes de comenzar&#10;                System.out.println(&quot;\n=== Iniciando simulación automática ===\n&quot;);&#10;&#10;                Thread.sleep(2000);&#10;                parkingLot.changeSpotStatus(1, SpotStatus.OCCUPIED);&#10;&#10;                Thread.sleep(2000);&#10;                parkingLot.changeSpotStatus(2, SpotStatus.OCCUPIED);&#10;&#10;                Thread.sleep(2000);&#10;                parkingLot.changeSpotStatus(3, SpotStatus.OCCUPIED);&#10;&#10;                Thread.sleep(2000);&#10;                parkingLot.changeSpotStatus(3, SpotStatus.FREE);&#10;&#10;                Thread.sleep(2000);&#10;                parkingLot.changeSpotStatus(4, SpotStatus.OUT_OF_SERVICE);&#10;&#10;                Thread.sleep(2000);&#10;                parkingLot.changeSpotStatus(1, SpotStatus.FREE);&#10;&#10;                System.out.println(&quot;\n=== Simulación completada ===\n&quot;);&#10;            } catch (InterruptedException e) {&#10;                Thread.currentThread().interrupt();&#10;            }&#10;        });&#10;        simulationThread.start();&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/smartparking/model/SpotStatus.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/smartparking/model/SpotStatus.java" />
              <option name="originalContent" value="package smartparking.model;&#10;&#10;// Implementación movida a src/smartparking/model/SpotStatus.java&#10;// Se deja este archivo vacío para evitar duplicados durante la compilación.&#10;" />
              <option name="updatedContent" value="package smartparking.model;&#10;&#10;/**&#10; * Estados posibles de una plaza de aparcamiento.&#10; */&#10;public enum SpotStatus {&#10;    FREE,              // Plaza libre&#10;    OCCUPIED,          // Plaza ocupada&#10;    OUT_OF_SERVICE     // Plaza fuera de servicio&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>